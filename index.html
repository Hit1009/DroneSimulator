<!DOCTYPE html>

<html lang="fr">
	<head>
		
		<title>Pierre EVEN - ThreeJS demo</title>
		<meta charset="utf-8">
		<link rel="stylesheet" href="style.css">
	</head>

	<body>
		<div id="threejsContainer"></div>
		<script type="module" src="threejs/build/three.module.js"></script>
		<script type="module" src="src/planeController.js"></script>
		<script type="module" src="src/landscape.js"></script>
		<script type="module" src="src/scene.js"></script>
	</body>

	<script id="LandscapeVertexShaders" type="x-shader/x-vertex">
		varying vec3 pNormal;
		varying vec3 pColor;
		varying vec3 pPosition;

		void main() {
			pNormal = normal;
			pColor = color;
			gl_Position = projectionMatrix *
							modelViewMatrix *
							vec4(position,1.0);
			pPosition = position;
		}
	</script>

	<script id="LandscapeFragmentShaders" type="x-shader/x-fragment">
		varying vec3 pNormal;
		varying vec3 pColor;
    	varying vec2 pUv;
		varying vec3 pPosition;

    	uniform sampler2D grassTexture;
    	uniform sampler2D rockTexture;



		void main() {

			vec3 ColorA = texture2D(rockTexture, pPosition.xy * 0.02).xyz;
			vec3 ColorB = texture2D(grassTexture, pPosition.xy * 0.02).rgb;


			float slope = dot(abs(pNormal), vec3(0,0,1));
			vec3 color = mix(ColorA, ColorB, pow(abs(slope), 20.0));
		  	gl_FragColor = vec4(color, 1);
		}
	</script>
</html>
